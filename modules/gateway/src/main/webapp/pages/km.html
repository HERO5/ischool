<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>KityMinder Example</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" >
    <link href="../editor-local/favicon.ico" type="image/x-icon" rel="shortcut icon">
    <link rel="stylesheet" href="../editor-local/bower_components/kityminder-core/src/kityminder.css" rel="stylesheet">

    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        #minder-view {
            border-radius: 10px;
            position: absolute;
            border: 1px solid #ccc;
            left: 20px;
            top: 20px;
            bottom: 20px;
            right: 20px;
        }

        #live2dcanvas {
            boder: none!important;
            position: fixed;
            opacity: 0.7;
            right: 0px;
            bottom: -20px;
            z-index: 99999;
            pointer-events: none;
            /*border: 1px dashed rgb(204, 204, 204);*/
        }
    </style>

    <!--<script type="text/javascript" src="node_modules/kity/dist/kity.min.js"></script>-->
    <script src="../editor-local/bower_components/kity/dist/kity.min.js"></script>
</head>
<body>
<input id="stuid" style="width: 100px; height: 25px; border-radius: 4px" />
<button onclick="modify_data()" style="height: 25px; border-radius: 4px">modify data</button>>
<script id="minder-view" type="application/kityminder" minder-data-type="json">

</script>

<div id="minder-container"></div>
<script type="text/javascript" src="../editor-local/bower_components/kityminder-core/dist/kityminder.core.min.js"></script>
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script src="../static/js/common.js"></script>
<script src="../static/js/config.js"></script>
<script type="text/javascript">
    var minder = new kityminder.Minder({
        renderTo: '#minder-container'
    });

    function init_data(){

        window.resource(
            "knowledgeListStuid",
            {stuid:"201808010525"},
            function(data){
                document.getElementById("minder-view").textContent = JSON.stringify(data);
            },
            false
        );
    }
    init_data();
    minder.setup('#minder-view');
    minder.disable();
    minder.execCommand('hand');
    //更多接口和命令参考"https://github.com/fex-team/kityminder-core/wiki"

    function modify_data(){
        var stuid = document.getElementById("stuid").value;
        window.resource(
            "knowledgeListStuid",
            {stuid:stuid},
            function(data){
                minder.importData("json", JSON.stringify(data)).then();
            },
            false
        );
        //var json = {"root":{"data":{"id":"000000000000000001", "created":1556365185034, "text":"Java 学习", "priority":1, "progress":1, "note":"null", "hyperlink":"null"}, "children":[{"data":{"id":"000000000000000002", "created":1556365185044, "text":"语法", "priority":2, "progress":1, "note":"null", "hyperlink":"null"}, "children":[{"data":{"id":"000000000000000003", "created":1556365185054, "text":"循环语句", "priority":2, "progress":1, "note":"null", "hyperlink":"null"}, "children":[]}, {"data":{"id":"000000000000000004", "created":1556365185064, "text":"选择语句", "priority":2, "progress":1, "note":"null", "hyperlink":"null"}, "children":[]}]}, {"data":{"id":"000000000000000005", "created":1556365185074, "text":"JVM", "priority":1, "progress":1, "note":"Java进阶学习", "hyperlink":"null"}, "children":[]}, {"data":{"id":"000000000000000006", "created":1556365185084, "text":"框架", "priority":1, "progress":1, "note":"null", "hyperlink":"null"}, "children":[{"data":{"id":"000000000000000007", "created":1556365185094, "text":"Spring", "priority":1, "progress":1, "note":"null", "hyperlink":"null"}, "children":[]}, {"data":{"id":"000000000000000008", "created":1556365185134, "text":"Hibernate", "priority":1, "progress":1, "note":"null", "hyperlink":"null"}, "children":[]}, {"data":{"id":"000000000000000009", "created":1556365185234, "text":"JFinal", "priority":1, "progress":1, "note":"null", "hyperlink":"null"}, "children":[]}, {"data":{"id":"000000000000000010", "created":1556365185334, "text":"while", "priority":2, "progress":1, "note":"null", "hyperlink":"null"}, "children":[]}]}]}, "template":"default", "theme":"fresh-blue", "version":"1.4.33"};
        //document.getElementById("minder-view").textContent = JSON.stringify(json);
    }

</script>

<!--
<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.0.4/lib/L2Dwidget.min.js"></script>
<script type="text/javascript">L2Dwidget.init();</script>
<div id="live2d-widget"><canvas id="live2dcanvas" width="300" height="600"></canvas></div>
-->

</body>

<!--
<script type="text/javascript" src="dist/kityminder.core.min.js"></script>
<script type="text/javascript">
    // 创建 km 实例
    /* global kityminder */
    var km = window.km = new kityminder.Minder();
    km.setup('#minder-view');
    km.disable();
    km.execCommand('hand');
</script>
-->

</html>
